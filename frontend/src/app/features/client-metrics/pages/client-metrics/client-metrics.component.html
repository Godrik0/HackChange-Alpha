@if (isLoading) {
  <nz-layout>
    <nz-content style="padding:24px; max-width: 90%; margin:0 auto;">
      <nz-card>
        <div style="text-align: center; padding: 40px;">
          Загрузка данных скоринга...
        </div>
      </nz-card>
    </nz-content>
  </nz-layout>
} @else if (hasError) {
  <nz-layout>
    <nz-content style="padding:24px; max-width: 90%; margin:0 auto;">
      <nz-empty nzNotFoundContent="Ошибка загрузки данных скоринга"/>
    </nz-content>
  </nz-layout>
} @else if (scoring) {
<nz-layout>
  <nz-header style="display:flex; align-items:center; justify-content:space-between;">
    <div class="logo">
      <img ngSrc="/logo.svg" alt="logo" routerLink='' style="cursor: pointer;" height="64" width="64">
    </div>
    <div class="user-name" style="font-weight:bold; font-size:18px;">
      {{ fullName }}
    </div>
  </nz-header>

  <nz-content style="padding:24px; max-width: 90%; margin:0 auto;">
    <nz-card>
      <div style="display:flex; justify-content:space-between; align-items:center;">
        <div>
          <p style="margin:0; font-size:12px; color:gray;">Прогнозируемый доход</p>
          <h2 style="margin:0;">{{ scoring.predict_income | number:'1.0-0' }} ₽</h2>
        </div>
        <app-income-chart [data]="incomeData"></app-income-chart>
      </div>
    </nz-card>

    <nz-card style="margin-top:16px;">
      <p style="font-weight:bold;">Кредитный лимит</p>
      <app-credit-slider
        [max]="scoring.max_credit_limit || scoring.credit_limit"
        [optimal]="scoring.credit_limit"
        [ngModel]="selectedLimit">
      </app-credit-slider>
      <div style="margin-top: 8px; display: flex; justify-content: space-between;">
        <span>Рекомендуемый: {{ scoring.credit_limit | number:'1.0-0' }} ₽</span>
        @if (scoring.max_credit_limit) {
          <span>Максимальный: {{ scoring.max_credit_limit | number:'1.0-0' }} ₽</span>
        }
      </div>
    </nz-card>

    <nz-card style="margin-top:16px;">
      <app-bullet-points [points]="bulletPoints"></app-bullet-points>
    </nz-card>

    <h1>Рекомендации</h1>
    @if (recommendations?.length) {
      <nz-row [nzGutter]="[70, 70]" style="margin-top:16px;">
        <nz-col *ngFor="let recommendation of recommendations" [nzSpan]="6">
          <app-action-card [recommendation]="recommendation"></app-action-card>
        </nz-col>
      </nz-row>
    }
  </nz-content>
</nz-layout>
} @else {
  <nz-layout>
    <nz-content style="padding:24px; max-width: 90%; margin:0 auto;">
      <nz-empty nzNotFoundContent="Клиент не найден"/>
    </nz-content>
  </nz-layout>
}
